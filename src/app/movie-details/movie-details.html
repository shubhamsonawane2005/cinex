<div class="details-container" *ngIf="movie">
  
  <div class="banner-bg" [style.backgroundImage]="'url(' + movie.image + ')'"></div>
  
  <div class="content-layer">
      <div class="poster-section">
        <img [src]="movie.image" [alt]="movie.title">
      </div>
    <div class="info-section">
      <h1 class="movie-title">{{ movie.title }}</h1>

      <div class="stats-row">
        <div class="rating-badge">
          <i class="fa-solid fa-star"></i> {{ movie.rating }}/10
        </div>
        <span>{{ movie.year || '2025' }}</span>
        <span>•</span>
        <span>{{ movie.genre }}</span>
        <span>•</span>
        <span>2h 15m</span>
      </div>

      <div class="description-box">
        <h3>About the Movie</h3>
        <p>{{ movie.description || 'No description available.' }}</p>
      </div>

      <div class="actions">
        <button class="btn-book" (click)="scrollToBooking()">
          Book Tickets
        </button>
      </div>
    </div>
  </div>

  <div class="section-container">
    <h3>Your Favorite Cast</h3>
    <div class="cast-grid">
      <div class="cast-member" *ngFor="let actor of cast">
        <div class="cast-img">
          <img [src]="actor.image" [alt]="actor.name">
        </div>
        <div class="cast-text">
          <p class="actor-name">{{ actor.name }}</p>
          <p class="actor-role">{{ actor.role }}</p>
        </div>
      </div>
    </div>
  </div>

  <div class="booking-wrapper" id="booking-section">
    <div class="section-container">
      <h3>Select Date & Theater</h3>
      
      <div class="date-selector-row">
        <div class="date-card" 
             *ngFor="let d of dates; let i = index" 
             [class.active]="d.active" 
             (click)="selectDate(i)">
           <span class="month">{{ d.month }}</span>
           <span class="day">{{ d.day }}</span>
           <span class="weekday">{{ d.weekday }}</span>
        </div>
      </div>

<!-- THEATER LIST -->
<div class="theaters-list">
  <div class="theater-row" *ngFor="let theater of theaters">
    
    <!-- COL 1: Theater Info & Directions -->
    <div class="theater-info-col">
       <div class="info-top">
         <div class="text-group">
           <h4>{{ theater.name }}</h4>
           <p class="address">{{ theater.address }}</p>
         </div>
       </div>
       
       <div class="info-bottom">
         <!-- YOUR DIRECTIONS BUTTON -->
         <div class="card-actions">
            <a [href]="theater.mapUrl || '#'" target="_blank" class="btn-map">
              <i class="fa-solid fa-map-location-dot"></i> Directions
            </a>
         </div>
         
         <div class="facilities">
           <span class="badge">M-Ticket</span>
           <span class="badge">F&B</span>
         </div>
       </div>
    </div>

    <!-- COL 2: Time Slots -->
    <div class="time-slots-col">
      <button class="time-btn" 
              *ngFor="let time of theater.timings" 
              [class.selected]="selectedTime === time && selectedTheater === theater.id"
              (click)="selectTime(time, theater.id)">
         {{ time }}
         <div class="price-tooltip">Rs. 250</div>
      </button>
    </div>

    <!-- COL 3: Book Action -->
    <div class="action-col">
      <button class="btn-book-ticket" 
              [disabled]="selectedTheater !== theater.id"
              (click)="proceedToBooking()">
        Book
      </button>
    </div>

  </div>
</div>

    </div>
  </div>

  <div class="section-container">
    <h3>You May Also Like</h3>
    <div class="similar-grid">
      <div class="movie-card-small" *ngFor="let m of similarMovies" [routerLink]="['/movie', m.id]">
        <img [src]="m.image" [alt]="m.title">
        <div class="card-title">{{ m.title }}</div> 
        <div class="card-rating">⭐ {{ m.rating }}</div>
      </div>
    </div>
  </div>

</div>